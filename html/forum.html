<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>论坛页面</title>
  <link rel="stylesheet" href="../css/navbar.css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #F3F3F3;
      padding: 0;
      margin: 0;
    }

    header {
      background-color: #4A90E2;
      padding: 20px;
      text-align: center;
      color: white;
      font-size: 1.5em;
    }

    #search-container {
      display: flex;
      justify-content: center;
      margin: 20px 0;
    }

    #search {
      width: 60%;
      padding: 10px;
      font-size: 1.2em;
      border: 1px solid #CCCCCC;
    }

    #forum-container {
      width: 70%;
      margin: 0 auto;
      background-color: white;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .post {
      padding: 10px 0;
      border-bottom: 1px solid #CCCCCC;
    }

    .post:last-child {
      border-bottom: none;
    }

    .post-title {
      font-size: 1.5em;
      margin: 0;
    }

    .post-info {
      color: #999999;
      font-size: 0.9em;
    }

    #new-post-btn {
      display: block;
      width: 100%;
      padding: 10px;
      background-color: #4A90E2;
      color: white;
      text-align: center;
      text-decoration: none;
      font-weight: bold;
      border-radius: 5px;
      margin-top: 20px;
    }
  </style>
</head>

<body>
  <div class="edison-header">
    <div class="container">
      <div class="header-inner-wrap">
        <div class="logo">
          <span class="wsite-logo">
            <a href="/">
              <span id="wsite-title">TECH CODE</span>
            </a>
          </span>
        </div>
        <div class="nav-wrap">
          <div class="dummy-menu">
            <ul class="wsite-menu-default">
              <li id="active" class="wsite-menu-item-wrap    wsite-nav-1" style="position: relative;">
                <a href="/" class="wsite-menu-item" style="position: relative;">
                  主页
                </a>
              </li>
              <li id="pg695107136787074782" class="wsite-menu-item-wrap has-submenu   wsite-nav-2"
                style="position: relative;">
                <a href="/product" class="wsite-menu-item" style="position: relative;">
                  产品
                </a>
              </li>
              <li id="pg686450546927473873" class="wsite-menu-item-wrap    wsite-nav-3" style="position: relative;">
                <a href="/evaluation" class="wsite-menu-item" style="position: relative;">
                  测评
                </a>
              </li>
              <li id="pg103030197960015510" class="wsite-menu-item-wrap    wsite-nav-4" style="position: relative;">
                <a href="/3616435759.html" class="wsite-menu-item" style="position: relative;">
                  资讯
                </a>
              </li>
              <li id="pg881371934255644335" class="wsite-menu-item-wrap    wsite-nav-5" style="position: relative;">
                <a href="/forum" class="wsite-menu-item" style="position: relative;">
                  论坛
                </a>
              </li>
              <li id="pg140230651504229610" class="wsite-menu-item-wrap    wsite-nav-6" style="position: relative;">
                <a href="/login_register" class="wsite-menu-item" style="position: relative;">
                  注册
                </a>
              </li>
              <li id="pg190149529979835302" class="wsite-menu-item-wrap    wsite-nav-7" style="position: relative;">
                <a href="/login_register" class="wsite-menu-item" style="position: relative;">
                  登录
                </a>
              </li>
            </ul>
          </div>
          <div class="nav desktop-nav">
            <ul class="wsite-menu-default">
              <li id="active" class="wsite-menu-item-wrap ">
                <a href="/" class="wsite-menu-item">
                  主页
                </a>
              </li>
              <li id="pg695107136787074782" class="wsite-menu-item-wrap has-submenu">
                <a href="/product" class="wsite-menu-item">
                  产品
                </a>
                <div class="wsite-menu-wrap" style="display:none">
                  <ul class="wsite-menu">
                    <li id="pg695107136787074782" class="wsite-menu-subitem-wrap cloned-link">
                      <a href="/product" class="wsite-menu-subitem">
                        产品
                      </a>
                    </li>
                    <li id="wsite-nav-656255702513029941" class="wsite-menu-subitem-wrap  ">
                      <a href="/compare" class="wsite-menu-item">
                        <span class="wsite-menu-title">
                          对比
                        </span>
                      </a>

                    </li>

                  </ul>
                </div>

              </li>
              <li id="pg686450546927473873" class="wsite-menu-item-wrap ">
                <a href="/evaluation" class="wsite-menu-item">
                  测评
                </a>

              </li>
              <li id="pg103030197960015510" class="wsite-menu-item-wrap ">
                <a href="/3616435759.html" class="wsite-menu-item">
                  资讯
                </a>

              </li>
              <li id="pg881371934255644335" class="wsite-menu-item-wrap ">
                <a href="/forum" class="wsite-menu-item">
                  论坛
                </a>

              </li>
              <li id="pg140230651504229610" class="wsite-menu-item-wrap ">
                <a href="/login_register" class="wsite-menu-item">
                  注册
                </a>

              </li>
              <li id="pg190149529979835302" class="wsite-menu-item-wrap ">
                <a href="/login_register" class="wsite-menu-item">
                  登录
                </a>

              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <h1>论坛页面</h1>
  <div id="search-container">
    <input type="text" id="search" placeholder="搜索帖子">
  </div>
  <div id="forum-page">
    <div id="forum-container">
      <div id="forum-posts"></div>
      <form id="create-post-form">
        <input type="text" id="post-title" placeholder="标题" required>
        <input type="text" id="post-author" placeholder="作者" required>
        <button type="submit">发新帖</button>
      </form>
      <div id="posts-container"></div>
    </div>
  </div>
  <div id="pagination">
    <!-- 分页链接在这里显示 -->
  </div>
  <footer>
    <div class="footcontent">
      <div class="footer-wrapper">
        <h4 class="footer-title">Quick Link</h4>
        <ul class="footer-menu footer-2-menu">
          <li><a href="#">关于</a></li>
          <li><a href="/product">产品</a></li>
          <li><a href="/evaluation">测评</a></li>
          <li><a href="#">资讯</a></li>
          <li><a href="/forum">论坛</a></li>
          <li><a href="#">我的</a></li>
          <li><a href="#">帮助和支持</a></li>
        </ul>
      </div>
      <div class="subscription">
        <div>
          <h4 class="dingyuetit">订阅我们</h4>
          <p></p>
          <p></p>
          <div class="subscription-input-wrapper">
            <input type="email" name="輸入你的郵箱*" required="" placeholder="輸入你的郵箱*" id="comp-jucjyt59input" value=""
              class="sub">
            <a href="index.html">
              <button2 class="button2" type="button">現在訂閲</button2>
            </a>
          </div>
          <img class="subcon" src="img/connect.png">
        </div>
        <div></div>
      </div>
      </p>
      <div class="contact-wrapper">
        <div>
          <h4 class="footer-title">联系我们</h4>
          <ul class="footer-link">
            <li>广州工商学院, 三水校区 <br> 广东，中国
            </li>
            <li><a href="/cdn-cgi/l/email-protection" class="__cf_email__"
                data-cfemail="1e7f7a7377705e7b667f736e727b307d7173">[email&#160;protected]</a>
            </li>
            <li>114- 5141919810</li>
          </ul>
        </div>
      </div>
    </div>
  </footer>
  </div>
  <div class="copyright">
    <p class="bs">&copy; 2023 by TechCode. Proudly created by Deng Yumin</p>
  </div>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    let currentPage = 1;
    const postsPerPage = 10;

    $(document).ready(function () {
      loadPosts(currentPage);

      $('#pagination').on('click', 'a', function (e) {
        e.preventDefault();
        currentPage = parseInt($(this).data('page'));
        loadPosts(currentPage);
      });
    });

    function loadPosts(page) {
      $.get(`/api/posts?page=${page}&limit=${postsPerPage}`, function (data) {
        const posts = data;
        console.log(data)
        const totalPages = Math.ceil(data.length / postsPerPage);

        displayPosts(posts);
        displayPagination(totalPages);
      });
    }

    function displayPosts(posts) {
      let html = '';
      posts.forEach((post) => {
        html += `
			      <div class="post">
			        <h2 class="post-title">${post.title}</h2>
			        <p class="post-info">作者：${post.author} | 发布日期：${post.date}</p>
			        <a href="/post?id=${post.id}">查看详情</a>
			      </div>
			    `;
      });
      $('#forum-container').html(html);
    }

			// function displayPagination(totalPages) {
			//   let html = '';
			//   for (let i = 1; i <= totalPages; i++) {
			//     html += `<a href="#" data-page="${i}">${i}</a>`;
			//   }
			//   $('#pagination').html(html);
			// }
  </script>
</body>

</html>